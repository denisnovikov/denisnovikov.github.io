<!DOCTYPE html><html lang="ru"><head>  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-89748707-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'UA-89748707-1'); </script><base href="https://denisnovikov.github.io"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="google-site-verification" content="aiV-7fBXdNhcJILKp5GXFesXJetzCgLWAbif-tZKfrY" /><meta name="yandex-verification" content="41a2ad868168b23f" /><meta name="openstat-verification" content="62f671b1eaa0d2a7ce234219685a42b3d7770961" /><meta property="op:markup_version" content="v1.0"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="application-name" content="FrontEnd Blog"><meta name="format-detection" content="telephone=no"><meta name="generator" content="jekyll"><meta name="google" content="notranslate"><meta name="rating" content="General"><meta name="referrer" content="never"><meta name="robots" content="index,follow,noodp"><meta name="subject" content="blog"><meta name="url" content="https://denisnovikov.github.io"><meta name="viewport" content="width=device-width, initial-scale=1"><title> Как установить Linux, Nginx, MySQL, PHP (LEMP) в Ubuntu 16.04 - denisnovikov.github.io</title><meta name="description" content="Стек LEMP представляет собой набор программного обеспечения, который используется для отображения динамических веб-страниц и веб-приложений. Этот акроним обо..."><link rel="alternate" hreflang="ru" href="/blog/linux-nginx-mysql-php-lemp-ubuntu-16-04-ru/" /><link rel="canonical" href="https://denisnovikov.github.io/blog/linux-nginx-mysql-php-lemp-ubuntu-16-04-ru/"><link rel="author" href="DNovikov"><link rel="me" href="https://github.com/denisnovikov" type="text/html"><link rel="me" href="mailto:dnovikov1808@gmail.com"><link href='https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|Roboto+Condensed:700&subset=latin' rel='stylesheet' type='text/css'><link rel="stylesheet" href="/assets/css/main.css"><meta property="og:url" content="https://denisnovikov.github.io/blog/linux-nginx-mysql-php-lemp-ubuntu-16-04-ru/"><meta property="og:type" content="website"><meta property="og:title" content="Как установить Linux, Nginx, MySQL, PHP (LEMP) в Ubuntu 16.04"><meta property="og:description" content="Стек LEMP представляет собой набор программного обеспечения, который используется для отображения динамических веб-страниц и веб-приложений"><meta property="og:site_name" content="denisnovikov.github.io"><meta property="og:locale" content="ru_RU"><meta property="article:author" content="DNovikov"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@dev_novikov"><meta name="twitter:creator" content="@dev_novikov"><meta name="twitter:url" content="https://denisnovikov.github.io/blog/linux-nginx-mysql-php-lemp-ubuntu-16-04-ru/"><meta name="twitter:title" content="Как установить Linux, Nginx, MySQL, PHP (LEMP) в Ubuntu 16.04"><meta name="twitter:description" content="Стек LEMP представляет собой набор программного обеспечения, который используется для отображения динамических веб-страниц и веб-приложений"><meta property="og:image" content="https://denisnovikov.github.io/assets/images/bg.svg"><meta name="twitter:image" content="https://denisnovikov.github.io/assets/images/bg.svg"><body><div id="shadow"></div><header class="main-header content-wrapper"> <input type="checkbox" id="menu-checkbox" /><nav class="center-wrapper nav-main"> <a class="blog-logo" href="/">denisnovikov.github.io</a> <a href="/about/">О проекте</a> <a href="/blog/">Все записи блога</a> <a href="/feed.xml" rel="alternate" type="application/rss+xml">RSS</a> <label for="menu-checkbox" class="toggle-button" data-open="☰" data-close="☰" onclick></label></nav></header><aside class="sidebar" role="note" style=" background-image: url( /assets/images/linux/linux-nginx-mysql-php-lemp-ubuntu-16-04-ru/preview-linux-nginx-mysql-php-lemp-ubuntu-16-04-ru.jpg )"><div class="cover"><div class="cover-text"><div class="heading"> <a href="/blog/#linux">linux</a></div><p> Стек LEMP представляет собой набор программного обеспечения, который используется для отображения динамических веб-страниц и веб-приложений Как установить Linux, Nginx, MySQL, PHP (LEMP) в Ubuntu 16.04</div></div><div id="switcher"></div></aside><main class="content-wrapper"><article class="post"><h1 class="post-title">Как установить Linux, Nginx, MySQL, PHP (LEMP) в Ubuntu 16.04</h1><p class="post-meta"> <time datetime="2017-03-07">07-03-2017</time> &nbsp;/&nbsp; <span>digitalocean.com</span><div class="post-content"><p>Стек LEMP представляет собой набор программного обеспечения, который используется для отображения динамических веб-страниц и веб-приложений. Этот акроним обозначает операционную систему Linux и веб-сервер Nginx. Данные при этом хранятся в базе данных MySQL, а динамическое отображение страниц выполняется средствами PHP.<p>В этой статье мы продемонстрируем процесс установки стека LEMP на сервер с Ubuntu 16.04. Операционная система Ubuntu удовлетворяет первому требованию LEMP - это операционная система на базе Linux. Далее мы опишем процесс установки остальных компонентов стека LEMP.<h2 id="Перед-установкой">Перед установкой</h2><p>Перед тем, как начать следовать описанным в этой статье шагам, убедитесь, что у вас есть обычный не-рутовый (non-root) пользователь с привилегиями <code class="highlighter-rouge">sudo</code>. Узнать, как настроить такого пользователя на вашем сервере, можно из <a href="https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-16-04">статьи о первичной настройке сервера на Ubuntu 16.04</a>.<p>После того, как вы создали такого пользователя, зайдите на сервер используя его логин и пароль. Теперь вы готовы следовать шагам, описанным в этой статье.<h2 id="Шаг-1---Установка-веб-сервера-nginx">Шаг 1 - Установка веб-сервера Nginx</h2><p>Для отображения веб-страниц вашего сайта мы будем использовать Nginx - современный и эффективный веб-сервер.<p>Всё программное обеспечение, которое мы будем использовать, будет установлено из стандартных репозиториев Ubuntu. Это означает, что мы можем использовать пакетный менеджер <strong>apt</strong> для установки.<p>Поскольку мы собираемся использовать <strong>apt</strong> в первый раз в ходе этой сессии, начнём с обновления локального списка пакетов. Далее установим сервер:<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>apt-get update<br data-jekyll-commonmark-ghpages="" /><span class="nv">$ </span><span class="nb">sudo </span>apt-get install nginx</code></pre></figure><p>В Ubuntu 16.04 Nginx настроен для запуска сразу после установки.<p>Если вы используете файрвол <code class="highlighter-rouge">ufw</code>, как описано в нашей статье о первичной настройке сервера, вам потребуется разрешить соединения для Nginx. В процессе установки Nginx регистрирует себя в <code class="highlighter-rouge">ufw</code>, поэтому процедура настройки достаточно проста.<p>Рекомендуется настраивать <code class="highlighter-rouge">ufw</code> таким образом, чтобы разрешать только тот трафик, который вы хотите разрешить в явном виде. Поскольку мы ещё не настроили SSL для нашего сервера, в этой статье мы разрешим трафик только для порта 80.<p>Сделать это можно следующей командой:<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>ufw allow <span class="s1">'Nginx HTTP'</span></code></pre></figure><p>Вы можете проверить изменения введя команду:<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>ufw status</code></pre></figure><p>В результате должен отобразиться вывод следующего вида:<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Status: active<br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />To                         Action      From<br data-jekyll-commonmark-ghpages="" /><span class="nt">--</span>                         <span class="nt">------</span>      <span class="nt">----</span><br data-jekyll-commonmark-ghpages="" />OpenSSH                    ALLOW       Anywhere<br data-jekyll-commonmark-ghpages="" />Nginx HTTP                 ALLOW       Anywhere<br data-jekyll-commonmark-ghpages="" />OpenSSH <span class="o">(</span>v6<span class="o">)</span>               ALLOW       Anywhere <span class="o">(</span>v6<span class="o">)</span><br data-jekyll-commonmark-ghpages="" />Nginx HTTP <span class="o">(</span>v6<span class="o">)</span>            ALLOW       Anywhere <span class="o">(</span>v6<span class="o">)</span></code></pre></figure><p>Теперь, когда мы разрешили трафик на порту 80, вы можете проверить, можно ли осуществить доступ к вашему серверу используя доменное имя или публичный IP адрес сервера в веб-браузере.<p>Если у вас нет доменного имени, присвоенного серверу, и вы не знаете публичного IP адреса сервера, вы можете найти этот IP адрес следующей командой:<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>ip addr show eth0 | <span class="nb">grep </span>inet | awk <span class="s1">'{ print $2; }'</span> | sed <span class="s1">'s/\/.*$//'</span></code></pre></figure><p>В результате будет выведено несколько IP адресов. Попробуйте вставить каждый из них в браузер.<p>Другим способом определить свой IP адрес будет проверка, как ваш сервер виден из Интернета:<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>curl <span class="nt">-4</span> icanhazip.com</code></pre></figure><p>Наберите полученный IP адрес в вашем веб-браузере. Вы должны увидеть страницу Nginx по умолчанию.<figure class="highlight"><pre><code class="language-text" data-lang="text">http://доменное_имя_или_IP_адрес</code></pre></figure><p><a href="/assets/images/linux/linux-nginx-mysql-php-lemp-ubuntu-16-04-ru/linux-nginx-mysql-php-lemp-ubuntu-16-04-ru-01.png"><img src="/assets/images/linux/linux-nginx-mysql-php-lemp-ubuntu-16-04-ru/linux-nginx-mysql-php-lemp-ubuntu-16-04-ru-01.png" alt="Страница Nginx по умолчанию" /></a><p>Если вы видите подобную страницу в своём браузере, вы успешно установили Nginx.<h2 id="Шаг-2---Установка-mysql-для-хранения-данных-сайта">Шаг 2 - Установка MySQL для хранения данных сайта</h2><p>Теперь, когда у нас есть веб-сервер, установим систему управления базами данных MySQL для хранения и управления данным нашего сайта.<p>Вы можете легко установить MySQL следующей командой:<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>apt-get install mysql-server</code></pre></figure><p>В процессе установки вам будет предложено ввести рутовый пароль (пароль администратора) для MySQL.<p>После завершения установки нам потребуется выполнить некоторые дополнительные команды, чтобы наше окружение MySQL было настроено безопасным образом. Введите следующую команду:<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>mysql_secure_installation</code></pre></figure><p>Скрипт запросит пароль, который вы только что задали для root пользователя в MySQL. Далее вам будет предложено сконфигурировать плагин валидации паролей (<code class="highlighter-rouge">VALIDATE PASSWORD PLUGIN</code>).<blockquote><p><strong>Внимание:</strong> решение включать плагин валидации паролей или нет носит субъективный характер. При включении все пароли, которые не удовлетворяют определённым критериям безопасности, будут отвергаться MySQL с сообщением об ошибке. Это может вызывать проблемы, если вы используете “слабые” пароли совместно с программным обеспечением, которое конфигурирует профили пользователей MySQL, например, пакеты Ubuntu для phpMyAdmin. Вы можете оставить валидацию паролей отключенной, но в этом случае вам следует всегда использовать “сильные” уникальные пароли для пользователей базы данных.</blockquote><p>Введите <strong>y</strong> для включения плагина или что-нибудь другое для продолжения без его включения:<figure class="highlight"><pre><code class="language-bash" data-lang="bash">VALIDATE PASSWORD PLUGIN can be used to <span class="nb">test </span>passwords<br data-jekyll-commonmark-ghpages="" />and improve security. It checks the strength of password<br data-jekyll-commonmark-ghpages="" />and allows the users to <span class="nb">set </span>only those passwords which are<br data-jekyll-commonmark-ghpages="" />secure enough. Would you like to setup VALIDATE PASSWORD plugin?<br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />Press y|Y <span class="k">for </span>Yes, any other key <span class="k">for </span>No:</code></pre></figure><p>Если вы включили валидацию паролей, вам будет предложено установить уровень надёжности паролей при валидации. Имейте в виду, что при выборе значения <strong>2</strong> (самый строгий уровень валидации), вы будете получать ошибки при попытке задать пароль без цифр, букв в верхнем и нижнем регистре, а также без специальных символов, а также при попытке использовать пароль, основанный на распространённых словах, которые уязвимы для подбора паролей по словарю.<figure class="highlight"><pre><code class="language-bash" data-lang="bash">There are three levels of password validation policy:<br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />LOW    Length <span class="o">&gt;=</span> 8<br data-jekyll-commonmark-ghpages="" />MEDIUM Length <span class="o">&gt;=</span> 8, numeric, mixed <span class="k">case</span>, and special characters<br data-jekyll-commonmark-ghpages="" />STRONG Length <span class="o">&gt;=</span> 8, numeric, mixed <span class="k">case</span>, special characters and dictionary file<br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />Please enter 0 <span class="o">=</span> LOW, 1 <span class="o">=</span> MEDIUM and 2 <span class="o">=</span> STRONG: 1</code></pre></figure><p>Если вы включили валидацию паролей, вам будет показан уровень надёжности заданного вами ранее пароля root пользователя, а также вам будет предложено изменить этот пароль. Если вы не хотите менять пароль, введите <strong>n</strong> или <strong>no</strong>:<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Using existing password <span class="k">for </span>root.<br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />Estimated strength of the password: 100<br data-jekyll-commonmark-ghpages="" />Change the password <span class="k">for </span>root ? <span class="o">((</span>Press y|Y <span class="k">for </span>Yes, any other key <span class="k">for </span>No<span class="o">)</span> : n</code></pre></figure><p>На все последующие вопросы просто вводите <strong>Y</strong> и нажимайте клавишу <strong>ENTER</strong> для выбора настроек по умолчанию. При этом удалятся некоторые тестовые пользователи и базы данных, будет отключена возможность удаленного доступа с учетной записью root-пользователя, и все изменения будут немедленно применены в MySQL.<p>Теперь ваша система управления базами данных установлена и мы можем двигаться дальше.<h2 id="Шаг-3---Установка-php">Шаг 3 - Установка PHP</h2><p>Теперь у нас есть веб-сервер Nginx для отображения нашего сайта, а также MySQL для хранения данных сайта. Нам осталось установить что-то, что позволит генерировать динамический контент для сайта. Для этого мы будем использовать PHP.<p>Поскольку Nginx не имеет встроенной поддержки обработки PHP, как некоторые другие веб-серверы, нам необходимо установить <code class="highlighter-rouge">php-fpm</code> (означает “fastCGI process manager”, менеджер процессов fastCGI). Мы настроим Nginx для передачи PHP запросов этому программному обеспечению для обработки.<p>Установим этот модуль, а также установим дополнительный пакет, который позволит PHP взаимодействовать с MySQL. В процессе установки будут загружены основные файлы PHP. Сделаем это следующей командой:<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>apt-get install php-fpm php-mysql</code></pre></figure><h3 id="Настройка-обработчика-php">Настройка обработчика PHP</h3><p>После установки компонентов PHP настроим их для повышения безопасности нашего веб-сервера.<p>Откроем конфигурационный файл <code class="highlighter-rouge">php-fpm</code> с привилегиями root:<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>nano /etc/php/7.0/fpm/php.ini</code></pre></figure><p>Найдём в этом файле параметр <code class="highlighter-rouge">cgi.fix_pathinfo</code>. Он будет закомментирован точкой с запятой (;) и будет иметь значение “1” по умолчанию.<p>Эти настройки по умолчанию очень небезопасны, потому что благодаря им PHP попытается исполнить ближайший файл, который сможет найти в случае, когда запрашиваемый PHP файл не может быть найден. Это позволит пользователям сформировать PHP запросы таким образом, чтобы запускать скрипты, к которым у них не должно быть доступа.<p>Мы можем предотвратить такое поведение раскомментировав эту строку и изменив её значение на “0”:<figure class="highlight"><pre><code class="language-ini" data-lang="ini"><span class="c"># /etc/php/7.0/fpm/php.ini<br data-jekyll-commonmark-ghpages="" /></span><span class="py">cgi.fix_pathinfo</span><span class="p">=</span><span class="s">0</span></code></pre></figure><p>Сохраните и закройте документ после внесения изменений.<p>Теперь нам осталось перезапустить обработчик PHP:<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>systemctl restart php7.0-fpm</code></pre></figure><p>После перезапуска наши настройки вступят в силу.<h2 id="Шаг-4---Настройка-nginx-для-работы-с-обработчиком-php">Шаг 4 - Настройка Nginx для работы с обработчиком PHP</h2><p>Теперь у нас установлены все необходимые компоненты. Единственное, что нам осталось сделать, это настроить Nginx для использования нашего обработчика PHP для отображения динамического контента.<p>Мы сделаем это на уровне серверных блоков (серверные блоки являются приблизительным аналогом виртуальных хостов в Apache). Откроем серверный блок Nginx сервера по умолчанию командой:<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>nano /etc/nginx/sites-available/default</code></pre></figure><p>Этот файл должен иметь примерно следующий вид:<figure class="highlight"><pre><code class="language-nginx" data-lang="nginx"><span class="c1"># /etc/nginx/sites-available/default<br data-jekyll-commonmark-ghpages="" /></span><span class="k">server</span> <span class="p">{</span><br data-jekyll-commonmark-ghpages="" />    <span class="kn">listen</span> <span class="mi">80</span> <span class="s">default_server</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />    <span class="kn">listen</span> <span class="s">[::]:80</span> <span class="s">default_server</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />    <span class="kn">root</span> <span class="n">/var/www/html</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />    <span class="kn">index</span> <span class="s">index.html</span> <span class="s">index.htm</span> <span class="s">index.nginx-debian.html</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />    <span class="kn">server_name</span> <span class="s">_</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />    <span class="kn">location</span> <span class="n">/</span> <span class="p">{</span><br data-jekyll-commonmark-ghpages="" />        <span class="kn">try_files</span> <span class="nv">$uri</span> <span class="nv">$uri</span><span class="n">/</span> <span class="p">=</span><span class="mi">404</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />    <span class="p">}</span><br data-jekyll-commonmark-ghpages="" /><span class="p">}</span></code></pre></figure><p>Нам необходимо внести несколько изменений в этот файл для нашего сайта.<ul><li>Прежде всего, нам необходимо добавить <code class="highlighter-rouge">index.php</code> первым значением директивы <code class="highlighter-rouge">index</code>, чтобы веб-сервер в первую очередь искал файлы <code class="highlighter-rouge">index.php</code>;<li>Мы можем изменить директиву <code class="highlighter-rouge">server_name</code> для указания доменного имени сервера или его публичного IP адреса;<li>Для корректной обработки PHP нам необходимо раскомментировать часть файла, которая отвечает за обработку PHP запросов. Это блок <code class="highlighter-rouge">location ~\.php$</code>, кусок кода <code class="highlighter-rouge">fastcgi-php.conf</code> и сокет для работы с <code class="highlighter-rouge">php-fpm</code>;<li>Мы также раскомментируем код, отвечающий за работу с файлами <code class="highlighter-rouge">.htaccess</code>. Nginx не обрабатывает эти файлы. Если какие-то из этих файлов окажутся в корневой директории сайта, они не должны быть доступны пользователям.</ul><p>Изменения, которые необходимо внести в этот файл помечены красным:<figure class="highlight"><pre><code class="language-nginx" data-lang="nginx"><span class="c1"># /etc/nginx/sites-available/default<br data-jekyll-commonmark-ghpages="" /></span><span class="k">server</span> <span class="p">{</span><br data-jekyll-commonmark-ghpages="" />    <span class="kn">listen</span> <span class="mi">80</span> <span class="s">default_server</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />    <span class="kn">listen</span> <span class="s">[::]:80</span> <span class="s">default_server</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />    <span class="kn">root</span> <span class="n">/var/www/html</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />    <span class="kn">index</span> <span class="s">index.php</span> <span class="s">index.html</span> <span class="s">index.htm</span> <span class="s">index.nginx-debian.html</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />    <span class="kn">server_name</span> <span class="s">доменное_имя_или_IP_адрес_сервера</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />    <span class="kn">location</span> <span class="n">/</span> <span class="p">{</span><br data-jekyll-commonmark-ghpages="" />        <span class="kn">try_files</span> <span class="nv">$uri</span> <span class="nv">$uri</span><span class="n">/</span> <span class="p">=</span><span class="mi">404</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />    <span class="p">}</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />    <span class="kn">location</span> <span class="p">~</span> <span class="sr">\.php$</span> <span class="p">{</span><br data-jekyll-commonmark-ghpages="" />        <span class="kn">include</span> <span class="nc">snippets/fastcgi-php</span><span class="s">.conf</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />        <span class="kn">fastcgi_pass</span> <span class="s">unix:/run/php/php7.0-fpm.sock</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />    <span class="p">}</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />    <span class="kn">location</span> <span class="p">~</span> <span class="sr">/\.ht</span> <span class="p">{</span><br data-jekyll-commonmark-ghpages="" />        <span class="kn">deny</span> <span class="s">all</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />    <span class="p">}</span><br data-jekyll-commonmark-ghpages="" /><span class="p">}</span></code></pre></figure><p>После внесения изменений сохраните и закройте файл.<p>Проверьте ваш файл конфигурации на наличие ошибок командой:<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>nginx <span class="nt">-t</span></code></pre></figure><p>Если в результате обнаружены какие-либо ошибки, откройте файл и исправьте их перед тем, как продолжить.<p>Когда всё готово, перезапустите Nginx для применения внесённых изменений:<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>systemctl reload nginx</code></pre></figure><h2 id="Шаг-5---Создание-файла-php-для-проверки-настроек">Шаг 5 - Создание файла PHP для проверки настроек</h2><p>Теперь ваш стек LEMP должен быть полностью готов к работе. Мы можем проверить, что Nginx корректно передаёт <code class="highlighter-rouge">.php</code> файлы нашему обработчику PHP.<p>Для этого создадим тестовый PHP файл в корневой директории веб-сервера. Откройте файл с именем <code class="highlighter-rouge">info.php</code> в корневой директории веб-сервера с помощью текстового редактора:<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>nano /var/www/html/info.php</code></pre></figure><p>Наберите или введите следующие строки в этот новый файл. Этот код PHP возвращает информацию о нашем сервере:<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span><br data-jekyll-commonmark-ghpages="" />    <span class="c1">// /var/www/html/info.php<br data-jekyll-commonmark-ghpages="" /></span>    <span class="nb">phpinfo</span><span class="p">();</span><br data-jekyll-commonmark-ghpages="" /><span class="cp">?&gt;</span></code></pre></figure><p>После внесения изменений сохраните и закройте файл.<p>Теперь мы можем проверить, может ли веб-сервер корректно отображать контент, сгенерированный PHP скриптом. Для проверки нам просто нужно открыть данную страницу в веб-браузере. Вам снова потребуется публичный IP-адрес сервера.<p>Откроем этот адрес:<figure class="highlight"><pre><code class="language-text" data-lang="text">http://домен_или_IP_адрес_сервера/info.php</code></pre></figure><p>Страница, на которую вы попадёте, должна выглядеть похожим образом:<p><a href="/assets/images/linux/linux-nginx-mysql-php-lemp-ubuntu-16-04-ru/linux-nginx-mysql-php-lemp-ubuntu-16-04-ru-02.png"><img src="/assets/images/linux/linux-nginx-mysql-php-lemp-ubuntu-16-04-ru/linux-nginx-mysql-php-lemp-ubuntu-16-04-ru-02.png" alt="Тестовая страница PHP" /></a><p>Если вы видите эту страницу, вы успешно настроили обработку PHP с помощью Nginx.<p>После того, как мы убедились, что всё работает, удалим этот файл, чтобы не давать неавторизованным пользователям возможности узнать дополнительную информацию о вашем сервере. При необходимости, вы всегда можете создать этот файл заново.<p>Удалим файл командой:<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>rm /var/www/html/info.php</code></pre></figure><h2 id="Заключение">Заключение</h2><p>Теперь у вас есть полностью настроенный стек LEMP на вашем сервере Ubuntu 16.04. Этот стек представляет собой прочный фундамент дальнейшей работы по предоставлению вашим пользователям веб-контента.<p align="right"><small><em>Источник: https://www.digitalocean.com/community/tutorials/linux-nginx-mysql-php-lemp-ubuntu-16-04-ru</em></small><div class="post-links"> <a class="link-to-post" href="/blog/black-website-promotion-how-not-to-do/"> <span class="link-to-post__next">&#10535; &nbsp;Next post</span> <span class="link-to-post__title">Черные методы продвижения сайтов. Что не стоит делать, если хотите вывести сайт в ТОП</span> </a> <a class="link-to-post" href="/blog/nothing-depends-on-you-when-you-order-a-design-online-store/"> <span class="link-to-post__prev">&#10535; &nbsp;Previous post</span> <span class="link-to-post__title">От вас ничего не зависит, когда вы заказываете разработку интернет-магазина</span> </a></div></div></article></main><footer class="blog-footer content-wrapper"><p>&copy; <span class="full-year"></span> denisnovikov.github.io</footer><script src="/assets/js/scripts.js"></script>  <script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function () { try { w.yaCounter45975960 = new Ya.Metrika({ id: 45975960, clickmap: true, trackLinks: true, accurateTrackBounce: true, webvisor: true }); } catch (e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks"); </script> <noscript><div> <img src="https://mc.yandex.ru/watch/45975960" style="position:absolute; left:-9999px;" alt="" /></div></noscript>  <!--Openstat--> <span id="openstat1"></span> <script type="text/javascript"> var openstat = { counter: 1, next: openstat }; (function(d, t, p) { var j = d.createElement(t); j.async = true; j.type = "text/javascript"; j.src = ("https:" == p ? "https:" : "http:") + "//openstat.net/cnt.js"; var s = d.getElementsByTagName(t)[0]; s.parentNode.insertBefore(j, s); })(document, "script", document.location.protocol); </script> <!--/Openstat-->
