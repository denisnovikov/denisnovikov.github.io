<!DOCTYPE html><html lang="ru"><head>  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-89748707-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'UA-89748707-1'); </script><base href="https://denisnovikov.github.io"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="google-site-verification" content="aiV-7fBXdNhcJILKp5GXFesXJetzCgLWAbif-tZKfrY" /><meta name="yandex-verification" content="41a2ad868168b23f" /><meta name="openstat-verification" content="62f671b1eaa0d2a7ce234219685a42b3d7770961" /><meta property="op:markup_version" content="v1.0"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="application-name" content="FrontEnd Blog"><meta name="format-detection" content="telephone=no"><meta name="generator" content="jekyll"><meta name="google" content="notranslate"><meta name="rating" content="General"><meta name="referrer" content="never"><meta name="robots" content="index,follow,noodp"><meta name="subject" content="blog"><meta name="url" content="https://denisnovikov.github.io"><meta name="viewport" content="width=device-width, initial-scale=1"><title> Битрикс: как узнать список разделов и элементов - denisnovikov.github.io</title><meta name="description" content="Бывают ситуации, когда нужно вывести список элементов или разделов конкретного информационного блока (инфоблока). Воспользуемся CIBlockElement::GetList для э..."><link rel="alternate" hreflang="ru" href="/blog/bitrix-how-to-know-list-of-sections-and-items/" /><link rel="canonical" href="https://denisnovikov.github.io/blog/bitrix-how-to-know-list-of-sections-and-items/"><link rel="author" href="DNovikov"><link rel="me" href="https://github.com/denisnovikov" type="text/html"><link rel="me" href="mailto:dnovikov1808@gmail.com"><link href='https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|Roboto+Condensed:700&subset=latin' rel='stylesheet' type='text/css'><link rel="stylesheet" href="/assets/css/main.css"><meta property="og:url" content="https://denisnovikov.github.io/blog/bitrix-how-to-know-list-of-sections-and-items/"><meta property="og:type" content="website"><meta property="og:title" content="Битрикс: как узнать список разделов и элементов"><meta property="og:description" content="Бывают ситуации, когда нужно вывести список элементов или разделов конкретного информационного блока (инфоблока)"><meta property="og:site_name" content="denisnovikov.github.io"><meta property="og:locale" content="ru_RU"><meta property="article:author" content="DNovikov"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@dev_novikov"><meta name="twitter:creator" content="@dev_novikov"><meta name="twitter:url" content="https://denisnovikov.github.io/blog/bitrix-how-to-know-list-of-sections-and-items/"><meta name="twitter:title" content="Битрикс: как узнать список разделов и элементов"><meta name="twitter:description" content="Бывают ситуации, когда нужно вывести список элементов или разделов конкретного информационного блока (инфоблока)"><meta property="og:image" content="https://denisnovikov.github.io/assets/images/bg.svg"><meta name="twitter:image" content="https://denisnovikov.github.io/assets/images/bg.svg"><body><div id="shadow"></div><header class="main-header content-wrapper"> <input type="checkbox" id="menu-checkbox" /><nav class="center-wrapper nav-main"> <a class="blog-logo" href="/">denisnovikov.github.io</a> <a href="/about/">О проекте</a> <a href="/blog/">Все записи блога</a> <a href="/feed.xml" rel="alternate" type="application/rss+xml">RSS</a> <label for="menu-checkbox" class="toggle-button" data-open="☰" data-close="☰" onclick></label></nav></header><aside class="sidebar" role="note" style=" background-image: url( /assets/images/pages/bg.svg)"><div class="cover"><div class="cover-text"><div class="heading"> <a href="/blog/#bitrix">bitrix</a></div><p> Бывают ситуации, когда нужно вывести список элементов или разделов конкретного информационного блока (инфоблока) Битрикс: как узнать список разделов и элементов</div></div><div id="switcher"></div></aside><main class="content-wrapper"><article class="post"><h1 class="post-title">Битрикс: как узнать список разделов и элементов</h1><p class="post-meta"> <time datetime="2015-05-26">26-05-2015</time> &nbsp;/&nbsp; <span>forwww.com</span><div class="post-content"><p>Бывают ситуации, когда нужно вывести список элементов или разделов конкретного информационного блока (инфоблока). Воспользуемся <strong>CIBlockElement::GetList</strong> для элементов и <strong>CIBlockSection::GetList</strong> для разделов соответственно.<h2 id="Как-вывести-список-элементов-инфоблока-в-1С-Битрикс">Как вывести список элементов инфоблока в 1С-Битрикс</h2><p>Для этого создадим тестовую страницу в корне нашего сайта, например test.php . Код нашего файла будет иметь следующий вид:<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?</span><br data-jekyll-commonmark-ghpages="" /><span class="k">require</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">"DOCUMENT_ROOT"</span><span class="p">]</span><span class="o">.</span><span class="s2">"/bitrix/header.php"</span><span class="p">);</span><br data-jekyll-commonmark-ghpages="" /><span class="nv">$APPLICATION</span><span class="o">-&gt;</span><span class="na">SetTitle</span><span class="p">(</span><span class="s2">"test"</span><span class="p">);</span><br data-jekyll-commonmark-ghpages="" /><span class="cp">?&gt;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />    Text...<br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="cp">&lt;?</span><span class="k">require</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">"DOCUMENT_ROOT"</span><span class="p">]</span><span class="o">.</span><span class="s2">"/bitrix/footer.php"</span><span class="p">);</span><span class="cp">?&gt;</span></code></pre></figure><p>Как видим, подключается header и footer (заголовок нам не нужен в принципе). Теперь напишем код CIBlockElement::GetList между подключением header и footer.<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?</span><span class="k">require</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">"DOCUMENT_ROOT"</span><span class="p">]</span><span class="o">.</span><span class="s2">"/bitrix/header.php"</span><span class="p">);</span><span class="cp">?&gt;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="cp">&lt;?</span><br data-jekyll-commonmark-ghpages="" /><span class="k">if</span> <span class="p">(</span><span class="nx">CModule</span><span class="o">::</span><span class="na">IncludeModule</span><span class="p">(</span><span class="s2">"iblock"</span><span class="p">))</span><span class="o">:</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />    <span class="nv">$iblock_id</span> <span class="o">=</span> <span class="mi">14</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />	<span class="c1"># show url my elements<br data-jekyll-commonmark-ghpages="" /></span>	<span class="nv">$my_elements</span> <span class="o">=</span> <span class="nx">CIBlockElement</span><span class="o">::</span><span class="na">GetList</span> <span class="p">(</span><br data-jekyll-commonmark-ghpages="" />	    <span class="nx">Array</span><span class="p">(</span><span class="s2">"ID"</span> <span class="o">=&gt;</span> <span class="s2">"ASC"</span><span class="p">),</span><br data-jekyll-commonmark-ghpages="" />	    <span class="nx">Array</span><span class="p">(</span><span class="s2">"IBLOCK_ID"</span> <span class="o">=&gt;</span> <span class="nv">$iblock_id</span><span class="p">),</span><br data-jekyll-commonmark-ghpages="" />	    <span class="kc">false</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />	    <span class="kc">false</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />	    <span class="nx">Array</span><span class="p">(</span><span class="s1">'ID'</span><span class="p">,</span> <span class="s1">'NAME'</span><span class="p">,</span> <span class="s1">'DETAIL_PAGE_URL'</span><span class="p">)</span><br data-jekyll-commonmark-ghpages="" />    <span class="p">);</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />	<span class="k">while</span><span class="p">(</span><span class="nv">$ar_fields</span> <span class="o">=</span> <span class="nv">$my_elements</span><span class="o">-&gt;</span><span class="na">GetNext</span><span class="p">())</span> <span class="p">{</span><br data-jekyll-commonmark-ghpages="" />	    <span class="k">echo</span> <span class="nb">urldecode</span><span class="p">(</span><span class="nv">$ar_fields</span><span class="p">[</span><span class="s1">'DETAIL_PAGE_URL'</span><span class="p">])</span><span class="o">.</span><span class="s2">" ;&lt;br&gt;"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />	<span class="p">}</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="k">endif</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="cp">?&gt;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="cp">&lt;?</span><span class="k">require</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">"DOCUMENT_ROOT"</span><span class="p">]</span><span class="o">.</span><span class="s2">"/bitrix/footer.php"</span><span class="p">);</span><span class="cp">?&gt;</span></code></pre></figure><p>Код мы написали, теперь давайте посмотрим что мы делаем:<ul><li>подключаем модуль iblock т.к. без него наш код может не работать;<li>задаем переменную, которая равна ID необходимого информационного блока (в моем случае это 14);<li>в переменную записываем CIBlockElement::GetList, иначе не сможем с ним работать;<li>в CIBlockElement::GetList есть массивы с данными:<ul><li><strong>Array(«ID» =&gt; «ASC»)</strong> — массив для сортировки, в нашем случае это ID по возрастанию,<li><strong>Array(«IBLOCK_ID» =&gt; $iblock_id)</strong> — массив для фильтрации — мы выбрали только по ID инфоблока,<li><strong>false, false</strong> — тут можно задать массивы для группировки элементов и выбрать параметры постраничной навигации (как правило, они не нужны, ставим каждому false),<li><strong>Array(‘ID’, ‘NAME’, ‘DETAIL_PAGE_URL’)</strong> — последний, но не менее важный массив, который вернет выбранные поля. В нашем случае он вернет ID, Имя элемента, полный путь к детальному элементу (его url).</ul><li>выводим по очереди все наши элементы с помощью цикла.</ul><p><strong>urldecode</strong> — я использовал для правильного отображения кириллических урлов (да, их оказывается кто-то еще использует). $ar_fields[‘DETAIL_PAGE_URL’] — выведет вам в каждой строке ссылку на элемент, при желании, вы можете заменить DETAIL_PAGE_URL на ID или NAME и т.д. в зависимости от того, какая перед вами стоит задача.<p><strong>Важно знать!</strong> Если вы не выбираете поля для последнего массива (который обычно называют arSelect), вы рискуете прилично загрузить ваш сервер, ведь он будет тащить для каждого элемента, значения всех его полей. Представьте сколько это запросов к БД.<h2 id="Как-узнать-значения-свойств-инфоблока-в-Битриксе">Как узнать значения свойств инфоблока в Битриксе</h2><p>Ну хорошо, мы выводим имя, id и ссылку — казалось бы, зачем весь этот цирк? А вот теперь рассмотрим случай, когда мы с помощью GetList можем узнать свойства инфоблока, конкретного элемента. Заменяем наш arSelect, он же массив с выбором полей на<p><strong>Array(‘ID’, ‘NAME’, ‘DETAIL_PAGE_URL’, ‘PROREPTY_TITLE’)</strong><p>где, <strong>TITLE</strong> — это символьный код вашего свойства (а приписка PROREPTY_ служит как раз для того чтобы это и указать).<p>Отобразить на экран свойство битрикса можно несколькими способами, в зависимости от его типа — строка это или список. Это может быть как<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="k">echo</span> <span class="nx">ar_fields</span><span class="p">[</span><span class="s1">'PROREPTY_TITLE'</span><span class="p">]</span><span class="o">.</span><span class="s2">" ;&lt;br&gt;"</span><span class="p">;</span></code></pre></figure><p>так и<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="k">echo</span> <span class="nv">$ar_fields</span><span class="p">[</span><span class="s1">'PROREPTY_TITLE_VALUE'</span><span class="p">]</span><span class="o">.</span><span class="s2">" ;&lt;br&gt;"</span><span class="p">;</span></code></pre></figure><p>Если у вас что-то не получается, давайте просто выведем список элементов массива:<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?</span><br data-jekyll-commonmark-ghpages="" /><span class="k">echo</span> <span class="s2">"&lt;pre&gt;"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="nb">print_r</span><span class="p">(</span><span class="nv">$ar_fields</span><span class="p">);</span><br data-jekyll-commonmark-ghpages="" /><span class="k">echo</span> <span class="s2">"&lt;/pre&gt;"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="cp">?&gt;</span></code></pre></figure><p>Кстати, если у вас много элементов в массиве, то для такой цели лучше вывести всего поля первого элемента (это может быть товар, новость и т.д.). Как это сделать? Либо дописать в GetList строку<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nx">Array</span> <span class="p">(</span><span class="s2">"nTopCount"</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">),</span></code></pre></figure><p>либо создать счетчик перед массивом и вывести для 1 элемента, примерно вот так:<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?</span><span class="k">require</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">"DOCUMENT_ROOT"</span><span class="p">]</span><span class="o">.</span><span class="s2">"/bitrix/header.php"</span><span class="p">);</span><span class="cp">?&gt;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="cp">&lt;?</span><br data-jekyll-commonmark-ghpages="" /><span class="k">if</span> <span class="p">(</span><span class="nx">CModule</span><span class="o">::</span><span class="na">IncludeModule</span><span class="p">(</span><span class="s2">"iblock"</span><span class="p">))</span><span class="o">:</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />	<span class="nv">$iblock_id</span> <span class="o">=</span> <span class="mi">14</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />	<span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />	<span class="c1"># show url my elements<br data-jekyll-commonmark-ghpages="" /></span>	<span class="nv">$my_elements</span> <span class="o">=</span> <span class="nx">CIBlockElement</span><span class="o">::</span><span class="na">GetList</span> <span class="p">(</span><br data-jekyll-commonmark-ghpages="" />	  <span class="nx">Array</span><span class="p">(</span><span class="s2">"ID"</span> <span class="o">=&gt;</span> <span class="s2">"ASC"</span><span class="p">),</span><br data-jekyll-commonmark-ghpages="" />	  <span class="nx">Array</span><span class="p">(</span><span class="s2">"IBLOCK_ID"</span> <span class="o">=&gt;</span> <span class="nv">$iblock_id</span><span class="p">),</span><br data-jekyll-commonmark-ghpages="" />	  <span class="kc">false</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />	  <span class="nx">Array</span> <span class="p">(</span><span class="s2">"nTopCount"</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">),</span><br data-jekyll-commonmark-ghpages="" />	  <span class="nx">Array</span><span class="p">(</span><span class="s1">'ID'</span><span class="p">,</span> <span class="s1">'NAME'</span><span class="p">,</span> <span class="s1">'DETAIL_PAGE_URL'</span><span class="p">,</span> <span class="s1">'PROREPTY_TITLE'</span><span class="p">)</span><br data-jekyll-commonmark-ghpages="" />	<span class="p">);</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />	<span class="k">while</span><span class="p">(</span><span class="nv">$ar_fields</span> <span class="o">=</span> <span class="nv">$my_elements</span><span class="o">-&gt;</span><span class="na">GetNext</span><span class="p">())</span><br data-jekyll-commonmark-ghpages="" />	<span class="p">{</span><br data-jekyll-commonmark-ghpages="" />	  <span class="k">if</span><span class="p">(</span><span class="nv">$i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <br data-jekyll-commonmark-ghpages="" />	  	<span class="nb">print_r</span><span class="p">(</span><span class="nv">$ar_fields</span><span class="p">);</span><br data-jekyll-commonmark-ghpages="" />	  <span class="nv">$i</span><span class="o">++</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />	<span class="p">}</span><br data-jekyll-commonmark-ghpages="" /><span class="k">endif</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="cp">?&gt;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="cp">&lt;?</span><span class="k">require</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">"DOCUMENT_ROOT"</span><span class="p">]</span><span class="o">.</span><span class="s2">"/bitrix/footer.php"</span><span class="p">);</span><span class="cp">?&gt;</span></code></pre></figure><blockquote><p>P.S. Показал где писать nTopCount</blockquote><h2 id="Как-вывести-список-разделов-в-1С-Битрикс">Как вывести список разделов в 1С Битрикс</h2><p>Описание почти такое же как и в предыдущим примере, но советую все же глянуть описание полей и возможных вариантов в официальной документации.<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?</span><span class="nv">$my_sections</span> <span class="o">=</span> <span class="nx">CIBlockSection</span><span class="o">::</span><span class="na">GetList</span> <span class="p">(</span><br data-jekyll-commonmark-ghpages="" />    <span class="nx">Array</span><span class="p">(</span><span class="s2">"ID"</span> <span class="o">=&gt;</span> <span class="s2">"ASC"</span><span class="p">),</span><br data-jekyll-commonmark-ghpages="" />    <span class="nx">Array</span><span class="p">(</span><span class="s2">"IBLOCK_ID"</span> <span class="o">=&gt;</span> <span class="mi">14</span><span class="p">,</span> <span class="s2">"ACTIVE"</span> <span class="o">=&gt;</span> <span class="s2">"Y"</span><span class="p">),</span><br data-jekyll-commonmark-ghpages="" />    <span class="kc">false</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />    <span class="nx">Array</span><span class="p">(</span><span class="s1">'ID'</span><span class="p">,</span> <span class="s1">'NAME'</span><span class="p">,</span> <span class="s1">'CODE'</span><span class="p">)</span><br data-jekyll-commonmark-ghpages="" /><span class="p">);</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="k">while</span><span class="p">(</span><span class="nv">$ar_fields</span> <span class="o">=</span> <span class="nv">$my_sections</span><span class="o">-&gt;</span><span class="na">GetNext</span><span class="p">())</span> <span class="p">{</span><br data-jekyll-commonmark-ghpages="" />    <span class="k">echo</span> <span class="nb">urldecode</span><span class="p">(</span><span class="nv">$ar_fields</span><span class="p">[</span><span class="s1">'CODE'</span><span class="p">])</span><span class="o">.</span><span class="s2">" ;&lt;br&gt;"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="p">}</span><span class="cp">?&gt;</span></code></pre></figure><p>Если вы заметили, у нас теперь массив с выбором по порядку четвертый а не пятый и добавился параметр » ACTIVE» =&gt; «Y» , который выводит только активные «разделы»(это работает и для CIBlockElement, просто в данном скрипте нашими элеменами являются разделы инфоблока). Принцип работы с CIBlockSection::GetList почти такой же, как и с CIBlockElement. В данном скрипте мы выводим символьный код разделов, предварительно преобразовав в читаемую кириллицу.<p align="right"><small><em>Источник: http://forwww.com/bitrix-how-to-get-element-and-section-list/</em></small><div class="post-links"> <a class="link-to-post" href="/blog/how-to-add-and-display-properties-of-sections-to-1c-bitrix/"> <span class="link-to-post__next">&#10535; &nbsp;Next post</span> <span class="link-to-post__title">Как добавить и отобразить свойства у разделов в 1С-Битрикс</span> </a> <a class="link-to-post" href="/blog/how-to-set-meta-properties-to-1c-bitrix/"> <span class="link-to-post__prev">&#10535; &nbsp;Previous post</span> <span class="link-to-post__title">Как задавать мета свойства в 1С-Битрикс</span> </a></div></div></article></main><footer class="blog-footer content-wrapper"><p>&copy; <span class="full-year"></span> denisnovikov.github.io</footer><script src="/assets/js/scripts.js"></script>  <script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function () { try { w.yaCounter45975960 = new Ya.Metrika({ id: 45975960, clickmap: true, trackLinks: true, accurateTrackBounce: true, webvisor: true }); } catch (e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks"); </script> <noscript><div> <img src="https://mc.yandex.ru/watch/45975960" style="position:absolute; left:-9999px;" alt="" /></div></noscript>  <!--Openstat--> <span id="openstat1"></span> <script type="text/javascript"> var openstat = { counter: 1, next: openstat }; (function(d, t, p) { var j = d.createElement(t); j.async = true; j.type = "text/javascript"; j.src = ("https:" == p ? "https:" : "http:") + "//openstat.net/cnt.js"; var s = d.getElementsByTagName(t)[0]; s.parentNode.insertBefore(j, s); })(document, "script", document.location.protocol); </script> <!--/Openstat-->
