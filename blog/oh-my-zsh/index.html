<!DOCTYPE html><html lang="ru"><head>  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-89748707-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'UA-89748707-1'); </script><base href="https://denisnovikov.github.io"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="google-site-verification" content="aiV-7fBXdNhcJILKp5GXFesXJetzCgLWAbif-tZKfrY" /><meta name="yandex-verification" content="41a2ad868168b23f" /><meta name="openstat-verification" content="62f671b1eaa0d2a7ce234219685a42b3d7770961" /><meta property="op:markup_version" content="v1.0"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="application-name" content="FrontEnd Blog"><meta name="format-detection" content="telephone=no"><meta name="generator" content="jekyll"><meta name="google" content="notranslate"><meta name="rating" content="General"><meta name="referrer" content="never"><meta name="robots" content="index,follow,noodp"><meta name="subject" content="blog"><meta name="url" content="https://denisnovikov.github.io"><meta name="viewport" content="width=device-width, initial-scale=1"><title> Oh My Zsh! - denisnovikov.github.io</title><meta name="description" content="Хочу поделиться очень отличным шелом, а по большей части, фреймворком созданным для него, который превратит вашу консоль в очень информативный и продуктивный..."><link rel="alternate" hreflang="ru" href="/blog/oh-my-zsh/" /><link rel="canonical" href="https://denisnovikov.github.io/blog/oh-my-zsh/"><link rel="author" href="DNovikov"><link rel="me" href="https://github.com/denisnovikov" type="text/html"><link rel="me" href="mailto:dnovikov1808@gmail.com"><link href='https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|Roboto+Condensed:700&subset=latin' rel='stylesheet' type='text/css'><link rel="stylesheet" href="/assets/css/main.css"><meta property="og:url" content="https://denisnovikov.github.io/blog/oh-my-zsh/"><meta property="og:type" content="website"><meta property="og:title" content="Oh My Zsh!"><meta property="og:description" content="Небольшой обзор и инструкция по установке оболочки для терминала Zsh и набора модификаций для него, чтобы сделать работу в терминале приятной и информативной"><meta property="og:site_name" content="denisnovikov.github.io"><meta property="og:locale" content="ru_RU"><meta property="article:author" content="DNovikov"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@dev_novikov"><meta name="twitter:creator" content="@dev_novikov"><meta name="twitter:url" content="https://denisnovikov.github.io/blog/oh-my-zsh/"><meta name="twitter:title" content="Oh My Zsh!"><meta name="twitter:description" content="Небольшой обзор и инструкция по установке оболочки для терминала Zsh и набора модификаций для него, чтобы сделать работу в терминале приятной и информативной"><meta property="og:image" content="https://denisnovikov.github.io/assets/images/bg.svg"><meta name="twitter:image" content="https://denisnovikov.github.io/assets/images/bg.svg"><body><div id="shadow"></div><header class="main-header content-wrapper"> <input type="checkbox" id="menu-checkbox" /><nav class="center-wrapper nav-main"> <a class="blog-logo" href="/">denisnovikov.github.io</a> <a href="/about/">О проекте</a> <a href="/blog/">Все записи блога</a> <a href="/feed.xml" rel="alternate" type="application/rss+xml">RSS</a> <label for="menu-checkbox" class="toggle-button" data-open="☰" data-close="☰" onclick></label></nav></header><aside class="sidebar" role="note" style=" background-image: url( /assets/images/linux/oh-my-zsh/preview-oh-my-zsh.png )"><div class="cover"><div class="cover-text"><div class="heading"> <a href="/blog/#linux">linux</a></div><p> Небольшой обзор и инструкция по установке оболочки для терминала Zsh и набора модификаций для него, чтобы сделать работу в терминале приятной и информативной Oh My Zsh!</div></div><div id="switcher"></div></aside><main class="content-wrapper"><article class="post"><h1 class="post-title">Oh My Zsh!</h1><p class="post-meta"> <time datetime="2017-06-19">19-06-2017</time> &nbsp;/&nbsp; <span>niklan.net</span><div class="post-content"><p>Хочу поделиться очень отличным шелом, а по большей части, фреймворком созданным для него, который превратит вашу консоль в очень информативный и продуктивный инструмент.<p>Данный материал пригодет только для пользователей unix-подобных систем, а именно Linux и MacOS. На MacOS не знаю что да как, но судя по всему установка и настройка совершенно не отличаются друг от друга. Соответственно его можно ставить и на веб-сервера.<h2 id="Что-это-и-зачем-оно">Что это и зачем оно</h2><p>Немного введу в курс дела, чтобы вы понимали что это такое и что оно даст. Во-первых, потребуется установить новую оболочку для терминала Zsh и переключиться на неё (кто не в курсе, они живут рядом с друг-другом и не затирают аналоги, так что можно всегда вернуться обратно, например на bash в ubuntu, + можно каждому юзеру выбирать свою, так что это совершенно безопасно). Во-вторых, мы поставим фреймворк для Zsh, который позволяет писать различные плагины, темы и т.д. для данной оболочки, что, собственно, и делает её такой удобой, так как люди написали кучу годноты.<p><a href="/assets/images/linux/oh-my-zsh/oh-my-zsh-01.png"><img src="/assets/images/linux/oh-my-zsh/oh-my-zsh-01.png" alt="Пример с GitHub" /></a><p>Я не могу вам описать всех возможностей, ибо некоторые из них не так заметны и не сразу бросаются в глаза. Например, при указании пути до файла\папки Tab в Zsh, делает то же самое что и в bash, но куда круче, а я заметил это спустя неделю, так как не обращал внимания. Он мало того что может учитывать регистры папок и поправлять вас, так и список папок также можно визуально перебирать табом, что просто очень удобно и ускоряет работу.<p>Я вообще изначально ставил данный шелл и фреймворк только ради Git плагина, который показывает (если вы находитесь в папках с репозиторием), актуально ли текущее состояние репозитория, в какой ветке находимся, имеются ли новые изменения в файлах, есть ли коммиты или изменения. В общем всю необходимую информацию. Не нужно проверять ветку через <code class="highlighter-rouge">git branch -v</code>, проверять есть ли изменения через <code class="highlighter-rouge">git status</code> и т.д.<p>У него есть куча интеграций с различными программами и системными утилитами, которые позволяют сделать работу с терминалом намного, намного приятнее. Ведь, особенно, с Drupal 8, работать с ним нужно все чаще и больше.<h2 id="Установка-zsh-и-oh-my-zsh">Установка Zsh и Oh My Zsh</h2><p>Первым делом нужно установить оболочку Zsh, для этого в Ubuntu необходимо просто запросить данный пакет, так как он находится в официальных репозиториях:<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>apt install zsh</code></pre></figure><p>Далее нам необходимо поставить фреймворк <a href="https://github.com/robbyrussell/oh-my-zsh">Oh My Zsh</a>. Разработчики предлагают два варианта установки, по сути они одинаковые, вам просто предоставляется выбор как вытянуть скрипт установщика, <code class="highlighter-rouge">wget</code> или <code class="highlighter-rouge">curl</code>, это лишь важно в тех случаях, когда на системе нет одного из них (частенько можно встретить отсутствие curl), и вы не хотите ставить пакет ради этого, или нет прав. Я также пишу вам два варианта, а какой использовать решайте сами:<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># curl</span><br data-jekyll-commonmark-ghpages="" /><span class="nv">$ </span>sh <span class="nt">-c</span> <span class="s2">"</span><span class="k">$(</span>curl <span class="nt">-fsSL</span> https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh<span class="k">)</span><span class="s2">"</span><br data-jekyll-commonmark-ghpages="" /><span class="c"># wget</span><br data-jekyll-commonmark-ghpages="" /><span class="nv">$ </span>sh <span class="nt">-c</span> <span class="s2">"</span><span class="k">$(</span>wget https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh <span class="nt">-O</span> -<span class="k">)</span><span class="s2">"</span></code></pre></figure><p>После данной установки, у вас запросят пароль чтобы переключить шел для текущего пользователя на Zsh. Вводим, и всё готово!<p><a href="/assets/images/linux/oh-my-zsh/oh-my-zsh-02.png"><img src="/assets/images/linux/oh-my-zsh/oh-my-zsh-02.png" alt="Oh My Zsh после установки" /></a><p>Из коробки он хоть уже и дает больше информации, как по мне, он выглядит хуже оригинального. Для этого в OMZ есть поддержка тем и плагинов, которые могут в корне менять оболочку.<h2 id="Где-и-что-находится">Где и что находится</h2><p>Данный раздел я не мог упустить так как он может очень сильно помочь в дальнейшем. Фреймворк Oh My Zsh находится в папке ~/.oh-my-zsh — там, в свою очередь, находятся все файлы фреймворка. А сама папка ничто иное как репозиторий Oh My Zsh. Но удалять папку просто так не стоит, там для этого есть специальный скрипт, ниже напишу как.<p>Все настройки для Oh My Zsh находятся в файле ~/.zshrc. О нем подробнее будет ниже.<h2 id="Установка-плагинов">Установка плагинов</h2><p>Начнем с установки нужных нам плагинов. Из коробки там стоит только git, больше никакие плагины не активированы. Список всех додступных плагинов поставляемых с фреймворком можно посмотреть на <a href="https://github.com/robbyrussell/oh-my-zsh/wiki/Plugins">странице wiki</a>, с описанием для чего они используются.<p>Например я хочу поставить себе следующие плагины:<ul><li><strong>npm</strong> — добавлят поддержку автодополнения к команде npm<li><strong>vagrant</strong> — так как я часто пользуюсь vagrant из-за Drupal VM, то мне он тоже не помешает. Также как и npm добавляет поддержку автодополнения. Там же есть и <strong>docker</strong>;<li><strong>composer</strong> — в 8-ке очень активно использую composer, а данный плагин опять же, добавляет автодополнение, и помимо этого различные полезные синонимы команд. Например <code class="highlighter-rouge">cu</code> = <code class="highlighter-rouge">composer update</code>;<li><strong>sudo</strong> — частенько бывает и такое, что вбиваешь или копируешь команду из интернета, но для неё требуются права супер-пользователя. Постоянно переводить курсор и дописывать муторно, а данный плагин позволяет просто нажать два раза <code class="highlighter-rouge">Esc</code>, и он сам добавит sudo в начало команды;<li><strong>web-search</strong> — а иногда случается ситуация, что роешься в консоли и забыл какую-то команду, нужно гуглануть, и чтобы не переключаться на браузер, не кликать на строку поиска, данный плагин позволяет написать <code class="highlighter-rouge">google drupal 8 composer</code>, и в браузере по умолчанию сразу откроются результаты.</ul><p>Там куча других плагинов, можно писать свои, выбирайте на свой вкус и под свои задачи, я продолжу гайд как поставить указаныне выше плагины (остальные ставятся абсолютно также).<p>Для того чтобы включить данные плагины (они уже есть в комплекте), достаточно отредактировать файл <code class="highlighter-rouge">~/.zshrc</code>. Для этого, в ubuntu, достаточно написать <code class="highlighter-rouge">nano ~/.zshrc</code> или <code class="highlighter-rouge">vi ~/.zshrc</code>, что вам удобнее. Открываем данный файл на редактирование и ищем строку <code class="highlighter-rouge">plugins=(git)</code> и добавляем туда все нужные нам плагины, учитывая список выше, вышло следующее: <code class="highlighter-rouge">plugins=(git npm vagrant composer sudo web-search)</code>. После изменения данного файла, <strong>всегда</strong> необходимо прописывать <code class="highlighter-rouge">source ~/.zshrc</code>, иначе изменения вступят в силу только после перезагрузки.<h2 id="Установка-тем-оформления">Установка тем оформления</h2><p>Из коробки оформление Zsh кому-то может и приглянуться, но мне оно не зашло. Называется она <code class="highlighter-rouge">robbyrussell</code>. Но есть куча других тем, по ссылке <a href="https://github.com/robbyrussell/oh-my-zsh/wiki/themes">полный список тем</a> которые идут в комплекте Oh My Zsh.<p>Я покажу как включать темы на примере оформления <strong>agnoster</strong>, так как оно больше всего мне по душе и иногда также требует дополнительных действий для корректной работы.<p>Для включеня данной темы нам опять, достаточно открыть <code class="highlighter-rouge">~/.zshrc</code> файли найти строку <code class="highlighter-rouge">ZSH_THEME="robbyrussell"</code> и заменить стандартную тему на нужную, в моем случае <code class="highlighter-rouge">agnoster</code>, итого получается <code class="highlighter-rouge">ZSH_THEME="agnoster"</code>. Не забываем про <code class="highlighter-rouge">source ~/.zshrc</code>. И всё уже работает!<p><a href="/assets/images/linux/oh-my-zsh/oh-my-zsh-03.png"><img src="/assets/images/linux/oh-my-zsh/oh-my-zsh-03.png" alt="Установленая тема: agnoster" /></a><p>Если у вас вместо иконок Git или нету “уголков” в строке навигации, то вам нужно поставить спец. шрифты с данными иконками. Множество тем требует установки данных шрифтов, они никак не помешают, но будет работать как нужно. Если всё как и на скринах - ставить не нужно, если же нет, то ниже инструкция для вас.<p>Давайте установим <a href="https://github.com/powerline/fonts">пропатченные шрифты</a>:<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># clone</span><br data-jekyll-commonmark-ghpages="" /><span class="nv">$ </span>git clone https://github.com/powerline/fonts.git<br data-jekyll-commonmark-ghpages="" /><span class="c"># install</span><br data-jekyll-commonmark-ghpages="" /><span class="nv">$ </span><span class="nb">cd </span>fonts<br data-jekyll-commonmark-ghpages="" /><span class="nv">$ </span>./install.sh<br data-jekyll-commonmark-ghpages="" /><span class="c"># clean-up a bit</span><br data-jekyll-commonmark-ghpages="" /><span class="nv">$ </span><span class="nb">cd</span> ..<br data-jekyll-commonmark-ghpages="" /><span class="nv">$ </span>rm <span class="nt">-rf</span> fonts</code></pre></figure><p>Этого уже будет достаточно, можно работать. Но некоторые моменты я ещё затрону.<h2 id="Настройки">Настройки</h2><p>Я их не правлю, но выписал с обьяснением чтобы было проще ориентироваться. Напоминаю что все они в <code class="highlighter-rouge">~/.zshrc</code>. Если настройка закомментирована, то вы можете расскоментировать её удалив <code class="highlighter-rouge">#</code>, то что указано в значении которое закомментировано - является противоположным значению по умолчанию.<ul><li><strong>CASE_SENSITIVE=”true”</strong> — чуствительность к регистру. Как я указал в начале статьи, он сам может исправлять регистр если видит что в текущем ничего не найдено. Если это мешает, установив данный параметр в true, поведение будет привычное bash;<li><strong>HYPHEN_INSENSITIVE=”true”</strong> — включает автоматическую замену между “_” и “-“. Аналогично параметру выше, но касается только дефиса и подчеркивания;<li><strong>DISABLE_AUTO_UPDATE=”true”</strong> — позволяет отключить автоматическое обновления Oh My Zsh;<li><strong>export UPDATE_ZSH_DAYS=13</strong> — задает переодично проверки обновлений;<li><strong>DISABLE_LS_COLORS=”true”</strong> — позволяте отключить цветовую палитру при выводе команды <code class="highlighter-rouge">ls</code>;<li><strong>DISABLE_AUTO_TITLE=”true”</strong> — отключение автоматического заголовка терминала;<li><strong>ENABLE_CORRECTION=”true”</strong> — включает корректировку команд. Например, вводя <code class="highlighter-rouge">compozer</code> он выдаст запрос: <code class="highlighter-rouge">correct 'compozer' to 'composer'?</code>;<li><strong>COMPLETION_WAITING_DOTS=”true”</strong> — включает точки ожидания ввода аргументов. Например введя <code class="highlighter-rouge">composer</code> и нажав <code class="highlighter-rouge">Tab</code>, он будет перебирать доступные команды (из-за одноименного плагина), а если ввести <code class="highlighter-rouge">java</code> и нажать таб, у него нет вариантов автодополнения (они будут появляться по мере их успешнного ввода в терминале и кэшироваться) он будет отображать красные точки для обязательного ввода которые можно отменить только <kbd>Ctrl + C</kbd>;<li><strong>DISABLE_UNTRACKED_FILES_DIRTY=”true”</strong> — отключает пометку неиспользуемых файлов в пределе Git репозитория как “гразных”, что увеличивает скорость скана для git. Не могу сказать точнее что это и как это работает, но это напрямую связанно с git вообще, а не только плагином;<li><strong>HIST_STAMPS=”mm/dd/yyyy”</strong> — позволяет менять формат даты для команды <code class="highlighter-rouge">history</code>;<li><strong>ZSH_CUSTOM=/path/to/new-custom-folder</strong> — позволяет добавить дополнительный путь до папки где будут храниться кастомные плагины и темы. По дефолту <code class="highlighter-rouge">~/.oh-my-zsh/custom</code>, она также будет функционаривать, т.е. параметр не перезатерающийся.</ul><h2 id="Фиксим-проблему-с-path">Фиксим проблему с PATH</h2><p>В Linux (не знаю как в MacOS), и в текущей версии я такой проблемы не словил, есть или можеть быть проблема что вы вбиваете команду в Zsh, а он говорит её нет. И это нормальное поведение, ведь в момент установки у вас был другой шелл, и возможно путь до бинарника указан в его индивидуальных настройках. Чтобы это исправить, достаточно указать путь до папки с бинарником(ами) в PATH переменную системы. Но bash’овский вариант <code class="highlighter-rouge">export PATH=/usr/local/bin:$PATH</code> прокатит до перезагрузки.<p>Вариант первый, это в файле конфига <code class="highlighter-rouge">~/.zshrc</code> раскомментировать соответсвующую строку в самом начале и добавить нужные пути, либо добавить их прямо из терминала:<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># Добавить в конец переменной</span><br data-jekyll-commonmark-ghpages="" /><span class="nv">$ </span>path+<span class="o">=(</span><span class="s1">'/home/USERNAME/SOMEPATH/bin'</span><span class="o">)</span><br data-jekyll-commonmark-ghpages="" /><span class="c"># Добавить в начало переменной</span><br data-jekyll-commonmark-ghpages="" /><span class="nv">$ path</span><span class="o">=(</span><span class="s1">'/home/USERNAME/SOMEPATH/bin'</span> <span class="nv">$path</span><span class="o">)</span><br data-jekyll-commonmark-ghpages="" /><span class="c"># Отгрузить новую переменную</span><br data-jekyll-commonmark-ghpages="" /><span class="nv">$ </span><span class="nb">export </span>PATH</code></pre></figure><h2 id="Удаляем-oh-my-zsh">Удаляем Oh My Zsh</h2><p>Если вам потребуется полностью удалить Oh My Zsh и сам шелл с системы, то это делается достаточно просто:<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># Удаляем Oh My Zsh и всё что с ним связано</span><br data-jekyll-commonmark-ghpages="" /><span class="nv">$ </span>uninstall_oh_my_zsh<br data-jekyll-commonmark-ghpages="" /><span class="c"># Удаляем Zsh</span><br data-jekyll-commonmark-ghpages="" /><span class="nv">$ </span><span class="nb">sudo </span>apt uninstall zsh</code></pre></figure><p align="right"><small><em>Источник: https://niklan.net/blog/149</em></small><div class="post-links"> <a class="link-to-post" href="/blog/as-in-template-display-information-on-all-pages-except-main-one-to-1c-bitrix/"> <span class="link-to-post__next">&#10535; &nbsp;Next post</span> <span class="link-to-post__title">Как в шаблоне выводить информацию на всех страницах, кроме главной</span> </a> <a class="link-to-post" href="/blog/how-to-speed-up-gzip-compression/"> <span class="link-to-post__prev">&#10535; &nbsp;Previous post</span> <span class="link-to-post__title">Как ускорить gzip сжатие?</span> </a></div></div></article></main><footer class="blog-footer content-wrapper"><p>&copy; <span class="full-year"></span> denisnovikov.github.io</footer><script src="/assets/js/scripts.js"></script>  <script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function () { try { w.yaCounter45975960 = new Ya.Metrika({ id: 45975960, clickmap: true, trackLinks: true, accurateTrackBounce: true, webvisor: true }); } catch (e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks"); </script> <noscript><div> <img src="https://mc.yandex.ru/watch/45975960" style="position:absolute; left:-9999px;" alt="" /></div></noscript>  <!--Openstat--> <span id="openstat1"></span> <script type="text/javascript"> var openstat = { counter: 1, next: openstat }; (function(d, t, p) { var j = d.createElement(t); j.async = true; j.type = "text/javascript"; j.src = ("https:" == p ? "https:" : "http:") + "//openstat.net/cnt.js"; var s = d.getElementsByTagName(t)[0]; s.parentNode.insertBefore(j, s); })(document, "script", document.location.protocol); </script> <!--/Openstat-->
