<!DOCTYPE html><html lang="ru"><head>  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-89748707-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'UA-89748707-1'); </script><base href="https://denisnovikov.github.io"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="google-site-verification" content="aiV-7fBXdNhcJILKp5GXFesXJetzCgLWAbif-tZKfrY" /><meta name="yandex-verification" content="41a2ad868168b23f" /><meta name="openstat-verification" content="62f671b1eaa0d2a7ce234219685a42b3d7770961" /><meta property="op:markup_version" content="v1.0"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="application-name" content="FrontEnd Blog"><meta name="format-detection" content="telephone=no"><meta name="generator" content="jekyll"><meta name="google" content="notranslate"><meta name="rating" content="General"><meta name="referrer" content="never"><meta name="robots" content="index,follow,noodp"><meta name="subject" content="blog"><meta name="url" content="https://denisnovikov.github.io"><meta name="viewport" content="width=device-width, initial-scale=1"><title> Организация кода для CSS-препроцессора - denisnovikov.github.io</title><meta name="description" content="Недавно прочитал статью на Frontender Magazine «организация кода для CSS препроцессоров», в которой рассказывается о нескольких вариантах организации файлово..."><link rel="alternate" hreflang="ru" href="/blog/organization-code-for-css-preprocessor/" /><link rel="canonical" href="https://denisnovikov.github.io/blog/organization-code-for-css-preprocessor/"><link rel="author" href="DNovikov"><link rel="me" href="https://github.com/denisnovikov" type="text/html"><link rel="me" href="mailto:dnovikov1808@gmail.com"><link href='https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|Roboto+Condensed:700&subset=latin' rel='stylesheet' type='text/css'><link rel="stylesheet" href="/assets/css/main.css"><meta property="og:url" content="https://denisnovikov.github.io/blog/organization-code-for-css-preprocessor/"><meta property="og:type" content="website"><meta property="og:title" content="Организация кода для CSS-препроцессора"><meta property="og:description" content="Недавно прочитал статью на Frontender Magazine, в которой рассказывается о нескольких вариантах организации файловой структуры стилей в проекте"><meta property="og:site_name" content="denisnovikov.github.io"><meta property="og:locale" content="ru_RU"><meta property="article:author" content="DNovikov"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@dev_novikov"><meta name="twitter:creator" content="@dev_novikov"><meta name="twitter:url" content="https://denisnovikov.github.io/blog/organization-code-for-css-preprocessor/"><meta name="twitter:title" content="Организация кода для CSS-препроцессора"><meta name="twitter:description" content="Недавно прочитал статью на Frontender Magazine, в которой рассказывается о нескольких вариантах организации файловой структуры стилей в проекте"><meta property="og:image" content="https://denisnovikov.github.io/assets/images/bg.svg"><meta name="twitter:image" content="https://denisnovikov.github.io/assets/images/bg.svg"><body><div id="shadow"></div><header class="main-header content-wrapper"> <input type="checkbox" id="menu-checkbox" /><nav class="center-wrapper nav-main"> <a class="blog-logo" href="/">denisnovikov.github.io</a> <a href="/about/">О проекте</a> <a href="/blog/">Все записи блога</a> <a href="/feed.xml" rel="alternate" type="application/rss+xml">RSS</a> <label for="menu-checkbox" class="toggle-button" data-open="☰" data-close="☰" onclick></label></nav></header><aside class="sidebar" role="note" style=" background-image: url( /assets/images/front-end/organization-code-for-css-preprocessor/preview-organization-code-for-css-preprocessor.svg )"><div class="cover"><div class="cover-text"><div class="heading"> <a href="/blog/#front-end">front-end</a></div><p> Недавно прочитал статью на Frontender Magazine, в которой рассказывается о нескольких вариантах организации файловой структуры стилей в проекте Организация кода для CSS-препроцессора</div></div><div id="switcher"></div></aside><main class="content-wrapper"><article class="post"><h1 class="post-title">Организация кода для CSS-препроцессора</h1><p class="post-meta"> <time datetime="2016-03-07">07-03-2016</time> &nbsp;/&nbsp; <span>canonium.com</span><div class="post-content"><p>Недавно прочитал статью на Frontender Magazine <a href="http://frontender.info/organizing-your-css-code-for-preprocessors/">«организация кода для CSS препроцессоров»</a>, в которой рассказывается о нескольких вариантах организации файловой структуры стилей в проекте, и решил поделиться своими размышлениями на эту тему. Я полагаю, что вы уже прочитали эту небольшую статью.<p>Окей, начнём, пожалуй с того, что я выскажу своё «фи» относительно представленных в статье архитектурах. Структуру, носящую название «функциональное разделение» сразу можно забросить, так как она представляет собой мусорку, в которой просто лежат файлы. Вариант «Катана» плох тем, что файл стилей контента будет бесконечным и не совсем ясно, как искать нужные стили. Шаблонное или страничное распределение плохо тем, что количество страниц может быть невелико, а их содержимое достигать предельных значений. Архитектура, предложенная Крисом Койером выглядит ужасно из-за того, что она олицетворяет мусорку из файлов. Коктейль «Хьюго» очень хорошо смотрится на фоне остальных решений, но страдает логикой распределения файлов по директориям. Почему страдает логикой? — вы скоро это узнаете. Относительно дополнения от Игоря Зенича я ничего сказать не могу, потому что не исповедую БЭМ-методологию.<p>Давайте более подробно пройдёмся по коктейлю «Хьюго». Мне непонятна логика разделения файлов препроцессора на директории. Ниже я сформировал несколько вопросов, на которые ответить себе я так и не смог:<ul><li>Почему файл типографики (<code class="highlighter-rouge">_typography.scss</code>) находится в директории <strong>base</strong>, а файл стилей кнопок (<code class="highlighter-rouge">_buttons.scss</code>) — в директории <strong>components</strong>, ведь кнопки — это базовый элемент любой страницы;<li>Почему файл глобальных констант (<code class="highlighter-rouge">_variables.scss</code>) находится в директории помощников? — автор предполагает, что переменные, объявленные в этом файле являются вспомогательными, а не глобальными?<li>Почему примеси собраны в одном файле (<code class="highlighter-rouge">_mixins.scss</code>), а не вынесены в отдельную директорию? Ведь на большом проекте примеси могут исчисляться десятками и иметь солидные размеры, например, если это генератор сетки.</ul><p>Как бы я улучшил коктейль «Хьюго»? — придумал свой коктейль, добавив больше логики и уделил должное внимание разбиению файлов препроцессора на директории. Итак, встречайте мои размышления на тему идеальной файловой структуры организации стилей проекта.<p>Просто взгляните на представленную ниже структуру и попробуйте ответить на вопрос — «куда я должен поместить файл стилей иконок?».<ul><li>components/<ul><li>_navbar.less</ul><li>mixins/<ul><li>_buttons.less<li>_clearfix.less</ul><li>modules/<ul><li>_buttons.less<li>_forms.less<li>_grid.less<li>_lists.less<li>_normalize.less<li>_scaffolding.less<li>_tables.less<li>_typography.less</ul><li>pages/<ul><li>_home.less</ul><li>partials/<ul><li>_footer.less<li>_header.less<li>_main.less<li>_variables.less</ul><li>styles.less</ul><p>Если вы ответили, что файл стилей иконок нужно поместить в директорию <strong>modules</strong>, то вы уже поняли суть моей структуры. Если же нет, то будем разбираться вместе.<p>Но перед тем как перейти к подробному разбору структуры, я хочу сказать, что в зависимости от задач здесь могут добавляться дополнительные директории, например, такие как <strong>library</strong>, <strong>helpers</strong>, <strong>themes</strong>. Директория <strong>library</strong> появляется в том случае, если проект использует библиотеки, которые невозможно найти в bower или npm. Директория <strong>helpers</strong> добавляется, если проект требует использования помощников (выравнивание текста, отступы и т.д.). И, наконец, директорию <strong>themes</strong> следует создавать в том случае, если в проекте предусмотрены дополнительные темы.<p>Теперь обратимся к файлу <code class="highlighter-rouge">styles.less</code>, который является точкой входа для всех стилей. Именно на него настраивается компилятор, и именно он соединяет все файлы препроцессора воедино.<p>К слову, я использую плагин <a href="https://www.npmjs.com/package/less-plugin-glob">less-plugin-glob</a> для препроцессора Less, который позволяет импортировать файлы на основе glob-паттерна.<figure class="highlight"><pre><code class="language-less" data-lang="less">// Settings<br data-jekyll-commonmark-ghpages="" />@bowerDir: "bower_components";<br data-jekyll-commonmark-ghpages="" />@npmDir: "node_modules";<br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />// Core<br data-jekyll-commonmark-ghpages="" />@import "_variables";<br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />// Mixins<br data-jekyll-commonmark-ghpages="" />@import "mixins/**";<br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />// Library<br data-jekyll-commonmark-ghpages="" />@import "modules/_normalize";<br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />// Package managers<br data-jekyll-commonmark-ghpages="" />@import "@{bowerDir}/xy-flexbox/xy";<br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />// Modules<br data-jekyll-commonmark-ghpages="" />@import "modules/!(_normalize)**";<br data-jekyll-commonmark-ghpages="" />@import "components/**";<br data-jekyll-commonmark-ghpages="" />@import "partials/**";<br data-jekyll-commonmark-ghpages="" />@import "pages/**";</code></pre></figure><p>Довольно легко догадаться, что файл <code class="highlighter-rouge">_variables.less</code> содержит глобальные константы. Под ними следует понимать переменные, необходимые всем модулям, компонентам или даже примесям. Однако, в этом файле не должно быть переменных, необходимых только одному компоненту или только одной теме — такие переменные описываются непосредственно в файле компонента или темы.<h2 id="mixins-partials-и-pages">Mixins, partials и pages</h2><p>Директория <strong>mixins</strong> содержит все примеси, используемые в проекте. В идеализированном случае, одна примесь — один файл, но никто не запрещает, допустим, написать две примеси для кнопок в одном файле.<p>Директория <strong>partials</strong> обычно включает в себя три файла стилей, которые стилизуют шапку (header), подвал (footer) и то, что между ними — центральную часть (main) сайта. Если вам необходимо поменять цвет фона шапки, то соответствующее свойство следует написать именно в файл <code class="highlighter-rouge">_header.less</code>, а не для каждого компонента, который используется в шапке. Точно такая же история и с подвалом, и с центральной частью.<p>В директорию <strong>pages</strong> складываются все файлы специфичных стилей для конкретных страниц. Так уж заведено, что каждая страница имеет уникальный для неё класс, присвоенный тегу <code class="highlighter-rouge">body</code>. Например, главная страница сайта имеет у тега <code class="highlighter-rouge">body</code> класс <code class="highlighter-rouge">page-home</code>, а страницы документации и полной версии записи (поста) имеет классы, соответственно, <code class="highlighter-rouge">page-docs</code> и <code class="highlighter-rouge">page-post</code>. Постараюсь ответить на вопрос: «что должно находиться в этих файлах?». Ответ довольно прост — специфичные для этой страницы стили, например, для изменения отображения какого-либо компонента.<h2 id="modules-и-components">Modules и components</h2><p>Вот мы и подошли к самому важному — <strong>модулям</strong> и <strong>компонентам</strong>.<p><strong>Модуль</strong> — это кирпичик, из которого строятся страницы или компоненты. Модуль включает в себя основные стили для элемента, который он пытается стилизовать. Например, файл <code class="highlighter-rouge">_buttons.less</code> стилизует кнопки и предоставляет различные вариации их отображения: цветные кнопки, групповые кнопки, кнопка как ссылка. Ещё одним примером может служить файл <code class="highlighter-rouge">_tables.less</code>, который стилизует таблицы и предоставляет, допустим, следующие их вариации: таблица с рамкой, таблица с «зеброй» и т.д.<p>Примеры модулей:<ul><li>Кнопки;<li>Элементы форм;<li>Таблицы;<li>Простые списки;<li>Типографика;<li>Сетка;<li>Какие-то общие стили проекта (<code class="highlighter-rouge">_scaffolding.less</code>).</ul><p>Теперь я отвечу на вопрос: «почему файл normalize находится в директории модулей?». Ответ довольно прост: потому, что ради одного файла нет смысла создавать целую директорию <strong>library</strong>, учитывая то, что этот файл может быть отредактирован (например, убраны стили по умолчанию для таблиц).<p><strong>Компонент</strong> — это цельный блок, из которого строится страница. Компонент включает в себя модули и, если это требуется, другие компоненты. Предполагается, что компонент независим и может быть с легкостью и без проблем с отображением, выдернут из одного контекста использования и вставлен в другой.<p>Такая идея используется в методологии <a href="http://rscss.io/">RSCSS</a> и <a href="https://ru.bem.info/method/key-concepts/#Блок">БЭМ-методологии</a> с той лишь разницей, что в их понимании блок — это форма, логотип, список ссылок и, наконец, глобальное меню, а здесь компонент — это нечто цельное, то есть лишь глобальное меню.<p>Вообще, говорить здесь о методологиях слегка неправильно, потому что мы описываем файловую структуру директории стилей, а не очередную методологию. Разумеется, вы можете создавать компоненты в бесчисленном количестве и так, как вам это удобно.<p>Примеры компонентов:<ul><li>Глобальная навигация;<li>Dropdown-меню;<li>Рекламные блоки;<li>Подсветка кода;<li>Список статей;<li>Jumbotron;<li>Блок социальных кнопок;<li>Список категорий или тегов;<li>Стилизация контента статьи.</ul><p>Я бы хотел остановиться на последнем пункте немного подробнее, так как изначально можно подумать, что стилизация контента статьи предполагает под собой лишь работу с типографикой и с легкостью может перекочевать в модуль. Отчасти это так, но стилизация контента статьи предполагает под собой использование модуля «типографика» и нескольких компонентов, что соответствует описанию компонента.<p>Так что же с ответом на вопрос: «куда я должен поместить файл стилей иконок?». Теперь вы уже точно можете сказать, что файл стилей иконок следует поместить в директорию модулей, потому что иконка сама по себе может называться элементом, который включается и в контексте компонента, и без него.<h2 id="Выводы">Выводы</h2><p>В статье на Frontender Magazine в конце каждого варианта организации стилей проекта приводится список плюсов и минусов, я полагаю, что стоит постараться объективно оценить и предложенный мной вариант:<h3 id="Плюсы">Плюсы</h3><ul><li>Здесь присутствует логика и смысл;<li>Строгое разбиение по предназначению;<li>Легко поддерживать вручную;<li>Каждый файл обещает быть небольшим по объему;<li>Вы всегда знаете, что класс типа <code class="highlighter-rouge">.navbar</code> можно найти в директории <code class="highlighter-rouge">components/_navbar.less</code>.</ul><h3 id="Минусы">Минусы</h3><ul><li>Много директорий и файлов;<li>Нужно думать: что есть модуль, а что есть компонент?<li>Иногда понятие компонента может быть расплывчатым.</ul><p align="right"><small><em>Источник: https://www.canonium.com/articles/organizing-code-in-project</em></small><div class="post-links"> <a class="link-to-post" href="/blog/customize-login-screen-lightdm-gtk-greeter/"> <span class="link-to-post__next">&#10535; &nbsp;Next post</span> <span class="link-to-post__title">Настройка экрана входа lightdm-gtk-greeter</span> </a> <a class="link-to-post" href="/blog/measure-performance-of-code-blocks/"> <span class="link-to-post__prev">&#10535; &nbsp;Previous post</span> <span class="link-to-post__title">Измерение производительности блоков кода</span> </a></div></div></article></main><footer class="blog-footer content-wrapper"><p>&copy; <span class="full-year"></span> denisnovikov.github.io</footer><script src="/assets/js/scripts.js"></script>  <script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function () { try { w.yaCounter45975960 = new Ya.Metrika({ id: 45975960, clickmap: true, trackLinks: true, accurateTrackBounce: true, webvisor: true }); } catch (e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks"); </script> <noscript><div> <img src="https://mc.yandex.ru/watch/45975960" style="position:absolute; left:-9999px;" alt="" /></div></noscript>  <!--Openstat--> <span id="openstat1"></span> <script type="text/javascript"> var openstat = { counter: 1, next: openstat }; (function(d, t, p) { var j = d.createElement(t); j.async = true; j.type = "text/javascript"; j.src = ("https:" == p ? "https:" : "http:") + "//openstat.net/cnt.js"; var s = d.getElementsByTagName(t)[0]; s.parentNode.insertBefore(j, s); })(document, "script", document.location.protocol); </script> <!--/Openstat-->
