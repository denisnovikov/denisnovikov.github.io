<!DOCTYPE html><html lang="ru"><head>  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-89748707-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'UA-89748707-1'); </script><base href="https://denisnovikov.github.io"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="google-site-verification" content="aiV-7fBXdNhcJILKp5GXFesXJetzCgLWAbif-tZKfrY" /><meta name="yandex-verification" content="41a2ad868168b23f" /><meta name="openstat-verification" content="62f671b1eaa0d2a7ce234219685a42b3d7770961" /><meta property="op:markup_version" content="v1.0"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="application-name" content="FrontEnd Blog"><meta name="format-detection" content="telephone=no"><meta name="generator" content="jekyll"><meta name="google" content="notranslate"><meta name="rating" content="General"><meta name="referrer" content="never"><meta name="robots" content="index,follow,noodp"><meta name="subject" content="blog"><meta name="url" content="https://denisnovikov.github.io"><meta name="viewport" content="width=device-width, initial-scale=1"><title> Как создать шаблон для сайта на 1С-Битрикс - denisnovikov.github.io</title><meta name="description" content="В этой статье мы с вами рассмотрим все особенности создания шаблона для Битрикса с нуля. Не важно, есть у вас готовая верстка, или вы просто перфекционист, к..."><link rel="alternate" hreflang="ru" href="/blog/how-to-create-a-template-for-a-site-on-1c-bitrix/" /><link rel="canonical" href="https://denisnovikov.github.io/blog/how-to-create-a-template-for-a-site-on-1c-bitrix/"><link rel="author" href="DNovikov"><link rel="me" href="https://github.com/denisnovikov" type="text/html"><link rel="me" href="mailto:dnovikov1808@gmail.com"><link href='https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|Roboto+Condensed:700&subset=latin' rel='stylesheet' type='text/css'><link rel="stylesheet" href="/assets/css/main.css"><meta property="og:url" content="https://denisnovikov.github.io/blog/how-to-create-a-template-for-a-site-on-1c-bitrix/"><meta property="og:type" content="website"><meta property="og:title" content="Как создать шаблон для сайта на 1С-Битрикс"><meta property="og:description" content="В этой статье мы с вами рассмотрим все особенности создания шаблона для Битрикса с нуля"><meta property="og:site_name" content="denisnovikov.github.io"><meta property="og:locale" content="ru_RU"><meta property="article:author" content="DNovikov"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@dev_novikov"><meta name="twitter:creator" content="@dev_novikov"><meta name="twitter:url" content="https://denisnovikov.github.io/blog/how-to-create-a-template-for-a-site-on-1c-bitrix/"><meta name="twitter:title" content="Как создать шаблон для сайта на 1С-Битрикс"><meta name="twitter:description" content="В этой статье мы с вами рассмотрим все особенности создания шаблона для Битрикса с нуля"><meta property="og:image" content="https://denisnovikov.github.io/assets/images/bg.svg"><meta name="twitter:image" content="https://denisnovikov.github.io/assets/images/bg.svg"><body><div id="shadow"></div><header class="main-header content-wrapper"> <input type="checkbox" id="menu-checkbox" /><nav class="center-wrapper nav-main"> <a class="blog-logo" href="/">denisnovikov.github.io</a> <a href="/about/">О проекте</a> <a href="/blog/">Все записи блога</a> <a href="/feed.xml" rel="alternate" type="application/rss+xml">RSS</a> <label for="menu-checkbox" class="toggle-button" data-open="☰" data-close="☰" onclick></label></nav></header><aside class="sidebar" role="note" style=" background-image: url( /assets/images/pages/bg.svg)"><div class="cover"><div class="cover-text"><div class="heading"> <a href="/blog/#bitrix">bitrix</a></div><p> В этой статье мы с вами рассмотрим все особенности создания шаблона для Битрикса с нуля Как создать шаблон для сайта на 1С-Битрикс</div></div><div id="switcher"></div></aside><main class="content-wrapper"><article class="post"><h1 class="post-title">Как создать шаблон для сайта на 1С-Битрикс</h1><p class="post-meta"> <time datetime="2015-10-05">05-10-2015</time> &nbsp;/&nbsp; <span>forwww.com</span><div class="post-content"><p>В этой статье мы с вами рассмотрим все особенности создания шаблона для Битрикса с нуля. Не важно, есть у вас готовая верстка, или вы просто перфекционист, которому только дай что-нибудь написать самому без посредников.<h2 id="Какие-файлы-нужны-для-создания-шаблона">Какие файлы нужны для создания шаблона</h2><p>Внешний вид вашего сайта (или представление сайта), всегда хранится в какой-то отдельной папке. В 1С-Битрикс путь к шаблону лежит через папку <strong>bitrix</strong>, в которой есть папка <strong>templates</strong> и уже в ней список всех наших шаблонов.<p>Путь к шаблонам: <strong>/bitrix/templates/</strong><p>Создать шаблон можно 3 способами:<ol><li>можно скопировать готовый шаблон и на его основе изменять под себя<li>можно создать через админку пустой шаблон<li>можно создать пустую папку и постепенно заполнять ее файлами и папками</ol><p>Как вы поняли 3-ий вариант самый хардкорный. Зайдем в админку, <strong>Администрирование &gt; Настройки &gt; Настройки продукта &gt; Сайты &gt; Шаблоны сайтов &gt; Добавить шаблон</strong> (ссылка относительно сайта: <em>/bitrix/admin/template_admin.php?lang=ru</em>).<p>ID шаблона это по сути имя папки в которой он будет лежать, я назову <strong>development</strong>. Остальные поля заполните как удобнее, они сейчас не очень важны. В код шаблона добавьте следующий код:<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?</span><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">defined</span><span class="p">(</span><span class="s2">"B_PROLOG_INCLUDED"</span><span class="p">)</span> <span class="o">||</span> <span class="nx">B_PROLOG_INCLUDED</span> <span class="o">!==</span> <span class="kc">true</span><span class="p">)</span> <span class="k">die</span><span class="p">();</span><span class="cp">?&gt;</span><br data-jekyll-commonmark-ghpages="" /><span class="cp">&lt;!DOCTYPE html&gt;</span><br data-jekyll-commonmark-ghpages="" /><span class="nt">&lt;html&gt;</span><br data-jekyll-commonmark-ghpages="" /><span class="nt">&lt;head&gt;</span><br data-jekyll-commonmark-ghpages="" />	<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span><br data-jekyll-commonmark-ghpages="" />	<span class="nt">&lt;title&gt;</span><span class="cp">&lt;?</span><span class="nv">$APPLICATION</span><span class="o">-&gt;</span><span class="na">ShowTitle</span><span class="p">()</span><span class="cp">?&gt;</span><span class="nt">&lt;/title&gt;</span><br data-jekyll-commonmark-ghpages="" />	<span class="cp">&lt;?</span><span class="nv">$APPLICATION</span><span class="o">-&gt;</span><span class="na">ShowHead</span><span class="p">()</span><span class="cp">?&gt;</span><br data-jekyll-commonmark-ghpages="" /><span class="nt">&lt;/head&gt;</span><br data-jekyll-commonmark-ghpages="" /><span class="nt">&lt;body&gt;</span><br data-jekyll-commonmark-ghpages="" />	<span class="cp">&lt;?</span><span class="nv">$APPLICATION</span><span class="o">-&gt;</span><span class="na">ShowPanel</span><span class="p">();</span><span class="cp">?&gt;</span><br data-jekyll-commonmark-ghpages="" />	#WORK_AREA#<br data-jekyll-commonmark-ghpages="" /><span class="nt">&lt;/body&gt;</span><br data-jekyll-commonmark-ghpages="" /><span class="nt">&lt;/html&gt;</span></code></pre></figure><ul><li><table><tbody><tr><td>**&lt;?if (!defined(«B_PROLOG_INCLUDED»)<td> <td>B_PROLOG_INCLUDED !== true) die();?&gt;** — пишем эту строку, чтобы файл нельзя было вызвать напрямую из браузера и он не начал выполняться;</table><li><strong><?$APPLICATION->ShowTitle()?></strong> — показываем текущий title для страницы;<li><strong><?$APPLICATION->ShowHead()?></strong> — показываем keywords, description и все скрипты;<li><strong><?$APPLICATION->ShowPanel();?></strong> — показываем панель для админов.</ul><p>После сохранения шаблона, мой файл <strong>description.php</strong>, выглядит так:<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?</span><br data-jekyll-commonmark-ghpages="" /><span class="nv">$arTemplate</span> <span class="o">=</span> <span class="k">array</span> <span class="p">(</span><br data-jekyll-commonmark-ghpages="" />	<span class="s1">'NAME'</span> <span class="o">=&gt;</span> <span class="s1">'Разработка'</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />	<span class="s1">'DESCRIPTION'</span> <span class="o">=&gt;</span> <span class="s1">'шаблон для разработки'</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />	<span class="s1">'SORT'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />	<span class="s1">'TYPE'</span> <span class="o">=&gt;</span> <span class="s1">''</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" /><span class="p">);</span><br data-jekyll-commonmark-ghpages="" /><span class="cp">?&gt;</span></code></pre></figure><p>Отлично, у нас в корне должны остаться 5 файлов, остальное на данный момент мы не будем использовать:<ul><li>description.php,<li>header.php,<li>footer.php,<li>styles.css,<li>template_styles.css</ul><p>Та часть кода, которая находится <strong>до #WORK_AREA#</strong> в итоге записывается в header.php. Угадайте, какая часть записывается в footer.php (та, что после нее). Сама ворк-арея представляет собой динамический контент (не всегда он такой уж и динамический), который находится, к примеру, в папке /contacts/ или /about/ в файле index.php. Сам файл обычно начинается подключением хедера и заканчивается подключением футера:<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?</span><span class="k">require</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">"DOCUMENT_ROOT"</span><span class="p">]</span><span class="o">.</span><span class="s2">"/bitrix/header.php"</span><span class="p">);</span><span class="cp">?&gt;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />Text хир<br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="cp">&lt;?</span><span class="k">require</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">"DOCUMENT_ROOT"</span><span class="p">]</span><span class="o">.</span><span class="s2">"/bitrix/footer.php"</span><span class="p">);</span><span class="cp">?&gt;</span></code></pre></figure><p>Пока что, все выглядит логично.<h2 id="1С-Битрикс-папки-и-структура-нового-шаблона">1С-Битрикс папки и структура нового шаблона</h2><p>В документации есть несколько рекомендаций, которые лично мне не очень нравятся. Во-первых, они любят называть папку с изображениями images вместо сокращенного <strong>img</strong>. И, я конечно все понимаю, но когда вы пишите стили, вам в любом случае нужно ссылаться на изображения, зачем писать в 2 раза больше?. Во-вторых, была такая рекомендация, хранить включаемые области в папке include_areas — почему бы не создать <strong>inc</strong>? В-третьих, зачем нам 2 файла со стилями? Если мне захочется вынести все в отдельный файл и подключать потом по необходимости, то эти стили будут хранится либо в шаблоне компонента, либо в папке css шаблона.<p>Если подытожить, наша правильная структура шаблона:<figure class="highlight"><pre><code class="language-tree" data-lang="tree">include_areas<br data-jekyll-commonmark-ghpages="" />images<br data-jekyll-commonmark-ghpages="" />components<br data-jekyll-commonmark-ghpages="" />js</code></pre></figure><p>Если быть немного бунтарем, то:<figure class="highlight"><pre><code class="language-tree" data-lang="tree">inc<br data-jekyll-commonmark-ghpages="" />img<br data-jekyll-commonmark-ghpages="" />components<br data-jekyll-commonmark-ghpages="" />js</code></pre></figure><p>Вас в принципе никто не ограничивает, это лишь рекомендации.<p>И вот мы плавно подошли к первой проблеме — <strong>хардкод</strong>. Хардкод это когда вы вместо динамических значений, например доменное имя, используете текстовую запись. Большинство начинающих разработчиков не знают про <strong>константу SITE_TEMPLATE_PATH</strong>, которая в качестве значения хранит путь к текущему шаблону — в нашем случае это <strong>/bitrix/templates/development</strong> (без слеша в конце, обратите внимание). И поэтому, когда вы будете подключать свои скрипты или включаемые области, для папки нужно писать:<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"</span><span class="cp">&lt;?=</span><span class="nx">SITE_TEMPLATE_PATH</span><span class="cp">?&gt;</span><span class="s">/js/script.js"</span><span class="nt">&gt;&lt;/script&gt;</span></code></pre></figure><p>и уж точно <strong>НЕ НУЖНО ПИСАТЬ</strong>:<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"/bitrix/templates/development/js/script.js"</span><span class="nt">&gt;&lt;/script&gt;</span></code></pre></figure><p>Зачем нам динамический путь к шаблону спросите вы?<ol><li>нам не нужно запоминать имена всех шаблона и помнить в каком именно мы сейчас шаблоне работаем<li>если мы поменяем имя шаблона, нам не нужно будет искать в файле это имя и исправлять на новое<li>легко запомнить</ol><p>Думаю, тут сплошные плюсы. Ну хорошо, это что касается PHP файлов, в которых мы можем использовать константу. А как насчет картинок и стилей? В CSS стилях пишите относительные пути.<p>Если это дополнительный файл со стилями и находится в папке css (редкий случай):<figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="nt">url</span><span class="o">(</span><span class="s2">'../img/ico-menu.png'</span><span class="o">);</span></code></pre></figure><p>Никогда <strong>НЕ пишите</strong> вот так:<figure class="highlight"><pre><code class="language-css" data-lang="css"><span class="nt">url</span><span class="o">(</span><span class="s2">'/bitrix/templates/development/img/ico-menu.png'</span><span class="o">)</span></code></pre></figure><p>хотя бы по причине того, что имя шаблона вдруг придется переименовать. И да, если вы скопировали пути с firebug, тоже удаляйте лишнее.<h3 id="Какие-изображения-хранить-не-в-шаблоне-а-в-корневой-папке-images">Какие изображения хранить не в шаблоне а в корневой папке images?</h3><p>Все довольно просто — те, которые вы будете использовать по всему сайту, особенно полезно если у вас много шаблонов. В стандартном шаблоне это изображение ошибки 404, думаю это хороший пример.<h2 id="1С-Битрикс-включаемые-области-для-шаблона">1С-Битрикс включаемые области для шаблона</h2><p>Код подключения включаемой области очень простой. В случае если наша папка находится в корне:<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?</span><span class="nv">$APPLICATION</span><span class="o">-&gt;</span><span class="na">IncludeComponent</span><span class="p">(</span><span class="s2">"bitrix:main.include"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s2">"AREA_FILE_SHOW"</span> <span class="o">=&gt;</span> <span class="s2">"file"</span><span class="p">,</span> <span class="s2">"PATH"</span> <span class="o">=&gt;</span> <span class="nx">SITE_DIR</span><span class="o">.</span><span class="s2">"include/company_logo.php"</span><span class="p">),</span> <span class="kc">false</span><span class="p">);</span><span class="cp">?&gt;</span></code></pre></figure><p>Если в шаблоне, то:<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?</span><span class="nv">$APPLICATION</span><span class="o">-&gt;</span><span class="na">IncludeComponent</span><span class="p">(</span><span class="s2">"bitrix:main.include"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s2">"AREA_FILE_SHOW"</span> <span class="o">=&gt;</span> <span class="s2">"file"</span><span class="p">,</span> <span class="s2">"PATH"</span> <span class="o">=&gt;</span> <span class="nx">SITE_TEMPLATE_PATH</span><span class="o">.</span><span class="s2">"/inc/company_logo.php"</span><span class="p">),</span> <span class="kc">false</span><span class="p">);</span><span class="cp">?&gt;</span></code></pre></figure><p>Во включаемые области лично я советую выносить практически все, где есть текст или изображения. Вот представьте, структура вашего шаблона, ее адаптивная основа, написана на bootstrap, к примеру, а содержимое каждого блока, можно легко отредактировать при помощи включенного визуального редактора. При этом, у вас уже есть прочный скелет, который не сломает всеми горячо-любимые визуальные редакторы.<p>Этих знаний вполне достаточно для экспериментов и создания простых шаблонов, но это лишь вершина айсберга, ведь мы не рассмотрели компоненты, скрипты, <a href="http://forwww.com/bitrix-how-to-show-information-on-the-main-page/">как показывать контент на разных страницах</a> и много чего другого.<p>Надеюсь, этот материал поможет вам легко создавать новые шаблоны для 1С-Битрикс.<p align="right"><small><em>Источник: http://forwww.com/bitrix-how-to-create-template/</em></small><div class="post-links"> <a class="link-to-post" href="/blog/customize-login-screen-lightdm-gtk-greeter/"> <span class="link-to-post__next">&#10535; &nbsp;Next post</span> <span class="link-to-post__title">Настройка экрана входа lightdm-gtk-greeter</span> </a> <a class="link-to-post" href="/blog/how-to-get-image-path-to-1c-bitrix/"> <span class="link-to-post__prev">&#10535; &nbsp;Previous post</span> <span class="link-to-post__title">Как получить путь к изображению в 1C-Битрикс</span> </a></div></div></article></main><footer class="blog-footer content-wrapper"><p>&copy; <span class="full-year"></span> denisnovikov.github.io</footer><script src="/assets/js/scripts.js"></script>  <script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function () { try { w.yaCounter45975960 = new Ya.Metrika({ id: 45975960, clickmap: true, trackLinks: true, accurateTrackBounce: true, webvisor: true }); } catch (e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks"); </script> <noscript><div> <img src="https://mc.yandex.ru/watch/45975960" style="position:absolute; left:-9999px;" alt="" /></div></noscript>  <!--Openstat--> <span id="openstat1"></span> <script type="text/javascript"> var openstat = { counter: 1, next: openstat }; (function(d, t, p) { var j = d.createElement(t); j.async = true; j.type = "text/javascript"; j.src = ("https:" == p ? "https:" : "http:") + "//openstat.net/cnt.js"; var s = d.getElementsByTagName(t)[0]; s.parentNode.insertBefore(j, s); })(document, "script", document.location.protocol); </script> <!--/Openstat-->
